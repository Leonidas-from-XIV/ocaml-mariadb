OASISFormat: 0.4
Name:        mariadb
Version:     0.0.1
Synopsis:    OCaml bindings for MariaDB
Authors:     Andre Nathan
License:     MIT

BuildTools:  ocamlbuild
Plugins:     META (0.4), DevFiles (0.4)

Library "mariadb"
  FindlibName:      mariadb
  Path:             lib
  Modules:          Mariadb
  InternalModules:  Common,
                    Bind,
                    Field,
                    Row,
                    Wait_status,
                    Util,
                    Ffi_generated,
                    Ffi_generated_types
  CSources:         ffi_generated_stubs.c
  CCOpt:            -I $pkg_ctypes_stubs
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  BuildDepends:     mariadb_bindings

Flag "nonblocking"
  Description:      Build the nonblocking bindings
  Default:          true

Library "mariadb_nonblocking"
  Build$:           flag(nonblocking)
  Install$:         flag(nonblocking)
  FindlibName:      nonblocking
  FindlibParent:    mariadb
  Path:             lib
  Modules:          Mariadb_nonblocking
  InternalModules:  Common,
                    Bind,
                    Field,
                    Row,
                    Wait_status,
                    Util,
                    Ffi_generated,
                    Ffi_generated_types
  CSources:         ffi_generated_stubs.c
  CCOpt:            -I $pkg_ctypes_stubs
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  BuildDepends:     mariadb,
                    mariadb_bindings

Library "mariadb_bindings"
  Install:          true
  Path:             bindings
  Modules:          Ffi_bindings
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  BuildDepends:     ctypes.foreign,
                    ctypes.stubs

Executable "ffi_stubgen"
  Install:          false
  Path:             stubgen
  MainIs:           ffi_stubgen.ml
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  BuildDepends:     mariadb_bindings

Executable "ffi_types_stubgen"
  Install:          false
  Path:             stubgen
  MainIs:           ffi_types_stubgen.ml
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  BuildDepends:     mariadb_bindings

Executable "test_blocking_functor"
  Install:          false
  Path:             lib_test
  MainIs:           test_blocking_functor.ml
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  CompiledObject:   best
  BuildDepends:     mariadb

Executable "test_nonblocking_functor"
  Build$:           flag(nonblocking)
  Install:          false
  Path:             lib_test
  MainIs:           test_nonblocking_functor.ml
  ByteOpt:          -warn-error +1..45
  NativeOpt:        -warn-error +1..45
  CompiledObject:   best
  BuildDepends:     mariadb_nonblocking,
                    unix
